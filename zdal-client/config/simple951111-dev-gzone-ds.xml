<?xml version="1.0" encoding="UTF-8"?>
<App name="simple951111" dbmode="dev" idcName="gzone" zoneError="EXCEPTOIN">
<AppDataSource name="simple951111" dataBaseType="MYSQL" version="1" zoneDs="">
  <datasource name="simple" dataSourceType="SHARD">
    <shard>
      <tableName>master_masterRule</tableName>
      <dbRules>
        <dbRule>Integer.valueOf(#user_id#)%4</dbRule>
      </dbRules>
      <tableRules>
        <tableRule>Integer.valueOf(#age#)%2</tableRule>
      </tableRules>
      <tableSuffix>resetForEachDB:[_0-_1]</tableSuffix>      
      <dbIndex>SETBYRULE:M[_00-_03]</dbIndex>
    </shard>
     <shard>
      <tableName>master_slaveRule</tableName>
      <dbRules>
        <dbRule>Integer.valueOf(#user_id#)%4</dbRule>
      </dbRules>
      <tableRules>
        <tableRule>Integer.valueOf(#age#)%2</tableRule>
      </tableRules>
      <tableSuffix>resetForEachDB:[_0-_1]</tableSuffix>      
      <dbIndex>SETBYRULE:M[_00-_03]</dbIndex>
    </shard>
   <datasource name="master" dataSourceType="FAILOVER" failoverRule="master">
    <datasource name="master0" dataSourceType="PHYSICS">
      <blockingTimeoutMillis>180</blockingTimeoutMillis>
      <driverClass>com.mysql.jdbc.Driver</driverClass>
      <idleTimeoutMinutes>180</idleTimeoutMinutes>
      <jdbcUrl>jdbc:mysql://mysql-1-2.bjl.alipay.net:3306/tddl_fail_0</jdbcUrl>
      <maxConn>20</maxConn>
      <minConn>1</minConn>
      <password>-76079f94c1e11c89</password>
      <preparedStatementCacheSize>100</preparedStatementCacheSize>
      <queryTimeout>180</queryTimeout>
      <sqlValve>-1,1</sqlValve>
      <tableValve />
      <transactionValve>-1,1</transactionValve>
      <userName>mysql</userName>
      <datasource name="master_00" dataSourceType="LOGIC" />
    </datasource>
    <datasource name="master1" dataSourceType="PHYSICS">
      <blockingTimeoutMillis>180</blockingTimeoutMillis>
      <driverClass>com.mysql.jdbc.Driver</driverClass>
      <idleTimeoutMinutes>180</idleTimeoutMinutes>
      <jdbcUrl>jdbc:mysql://mysql-1-2.bjl.alipay.net:3306/tddl_fail_1</jdbcUrl>
      <maxConn>20</maxConn>
      <minConn>1</minConn>
      <password>-76079f94c1e11c89</password>
      <preparedStatementCacheSize>100</preparedStatementCacheSize>
      <queryTimeout>180</queryTimeout>
      <sqlValve>-1,1</sqlValve>
      <tableValve />
      <transactionValve>-1,1</transactionValve>
      <userName>mysql</userName>
      <datasource name="master_01" dataSourceType="LOGIC" />
    </datasource>
    <datasource name="master2" dataSourceType="PHYSICS">
      <blockingTimeoutMillis>180</blockingTimeoutMillis>
      <driverClass>com.mysql.jdbc.Driver</driverClass>
      <idleTimeoutMinutes>180</idleTimeoutMinutes>
      <jdbcUrl>jdbc:mysql://mysql-1-2.bjl.alipay.net:3306/tddl_fail_2</jdbcUrl>
      <maxConn>20</maxConn>
      <minConn>1</minConn>
      <password>-76079f94c1e11c89</password>
      <preparedStatementCacheSize>100</preparedStatementCacheSize>
      <queryTimeout>180</queryTimeout>
      <sqlValve>-1,1</sqlValve>
      <tableValve />
      <transactionValve>-1,1</transactionValve>
      <userName>mysql</userName>
      <datasource name="master_02" dataSourceType="LOGIC" />
    </datasource>
    <datasource name="master3" dataSourceType="PHYSICS">
      <blockingTimeoutMillis>180</blockingTimeoutMillis>
      <driverClass>com.mysql.jdbc.Driver</driverClass>
      <idleTimeoutMinutes>180</idleTimeoutMinutes>
      <jdbcUrl>jdbc:mysql://mysql-1-2.bjl.alipay.net:3306/tddl_fail_3</jdbcUrl>
      <maxConn>20</maxConn>
      <minConn>1</minConn>
      <password>-76079f94c1e11c89</password>
      <preparedStatementCacheSize>100</preparedStatementCacheSize>
      <queryTimeout>180</queryTimeout>
      <sqlValve>-1,1</sqlValve>
      <tableValve />
      <transactionValve>-1,1</transactionValve>
      <userName>mysql</userName>
      <datasource name="master_03" dataSourceType="LOGIC"/>
    </datasource>
   </datasource>
  </datasource>
</AppDataSource>
</App>

