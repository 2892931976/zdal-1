<?xml version="1.0" encoding="gb2312"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
    <!--数据源0 -->
	<bean id="dataSource0" class="org.apache.commons.dbcp.BasicDataSource" init-method="createDataSource" destroy-method="close">
		<property name="driverClassName" value="com.mysql.jdbc.Driver" />
		<property name="url" value="jdbc:mysql://mysql-1-2.bjl.alipay.net:3306/tddl_sample_0" />
		<property name="username" value="mysql" />
		<property name="password" value="mysql" />
	</bean>

         <!--业务数据源1 -->
	<bean id="dataSource1" class="org.apache.commons.dbcp.BasicDataSource" init-method="createDataSource" destroy-method="close">

		<property name="driverClassName" value="com.mysql.jdbc.Driver" />
		<property name="url" value="jdbc:mysql://mysql-1-2.bjl.alipay.net:3306/tddl_sample_1" />
		<property name="username" value="mysql" />
		<property name="password" value="mysql" />
	</bean>

      <!--业务数据源2 -->
	<bean id="dataSource2" class="org.apache.commons.dbcp.BasicDataSource" init-method="createDataSource" destroy-method="close">

		<property name="driverClassName" value="com.mysql.jdbc.Driver" />
		<property name="url" value="jdbc:mysql://mysql-2-2.bjl.alipay.net:3306/tddl_sample_2" />
		<property name="username" value="mysql" />
		<property name="password" value="mysqlbak" />
	</bean>

 <!--业务数据源3 -->
	<bean id="dataSource3" class="org.apache.commons.dbcp.BasicDataSource" init-method="createDataSource" destroy-method="close">
		<property name="driverClassName" value="com.mysql.jdbc.Driver" />
		<property name="url" value="jdbc:mysql://mysql-2-2.bjl.alipay.net:3306/tddl_sample_3" />
		<property name="username" value="mysql" />
		<property name="password" value="mysqlbak" />
	</bean>

    <bean id="datasourceIntrospactor" class="com.taobao.tddl.util.dispatchAnalyzer.TDatasourceIntrospector" init-method="init">
		<property name="targetDataSource" ref="itemDataSource"/>
		<property name="closeDBLimitNumber" value="0"/>
		
	</bean>
  
 <bean id="Tmaster" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource"><ref bean="itemDataSource"/></property>
    </bean>

    <bean id="Treal1" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource"><ref bean="dataSource0"/></property>
    </bean>
    <bean id="Treal2" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource"><ref bean="dataSource1"/></property>
    </bean>
    <bean id="Treal3" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource"><ref bean="dataSource2"/></property>
    </bean>
    <bean id="Treal4" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource"><ref bean="dataSource3"/></property>
    </bean>
    
	<!-- tddl数据源 -->
	<bean id="itemDataSource" class="com.taobao.tddl.client.jdbc.TDataSource" init-method="init">
		<!--  <property name="rwDataSourcePool">-->
		<property name="dataSourcePool">
			<map>
				<entry key="db_0" value="dataSource0"/>
                <entry key="db_1" value="dataSource1"/>
                <entry key="db_2" value="dataSource2"/>
                <entry key="db_3" value="dataSource3"/>
			</map>
		</property>
		
		<property name="keyWeightConfig">
		  <map>
		  		<entry key="group_0" value="db_0:10,db_2:10"/>
		  		<entry key="group_1" value="db_1:10,db_3:10"/>
		  </map>
		</property>
		
		<property name="useLocalConfig" value="true"/>
		<property name="appName"  value="tddl_sample_app"/>
		<property name="appRuleFile" value="classpath:introspector/introspector-rule-1.xml"/>
		
	</bean>
</beans>
